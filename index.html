<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered User Research Tool</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.7.0/dist/vanilla-tilt.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f6f8fc 0%, #e9f0f7 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .noise {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAUVBMVEWFhYWDg4N3d3dtbW17e3t1dXWBgYGHh4d5eXlzc3OLi4ubm5uVlZWPj4+NjY19fX2JiYl/f39ra2uRkZGZmZlpaWmXl5dvb29xcXGTk5NnZ2c8TV1mAAAAG3RSTlNAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAvEOwtAAAFVklEQVR4XpWWB67c2BUFb3g557T/hRo9/WUMZHlgr4Bg8Z4qQgQJlHI4A8SzFVrapvmTF9O7dmYRFZ60YiBhJRCgh1FYhiLAmdvX0CzTOpNE77ME0Zty/nWWzchDtiqrmQDeuv3powQ5ta2eN0FY0InkqDD73lT9c9lEzwUNqgFHs9VQce3TVClFCQrSTfOiYkVJQBmpbq2L6iZavPnAPcoU0dSw0SUTqz/GtrGuXfbyyBniKykOWQWGqwwMA7QiYAxi+IlPdqo+hYHnUt5ZPfnsHJyNiDtnpJyayNBkF6cWoYGAMY92U2hXHF/C1M8uP/ZtYdiuj26UdAdQQSXQErwSOMzt/XWRWAz5GuSBIkwG1H3FabJ2OsUOUhGC6tK4EMtJO0ttC6IBD3kM0ve0tJwMdSfjZo+EEISaeTr9P3wYrGjXqyC1krcKdhMpxEnt5JetoulscpyzhXN5FRpuPHvbeQaKxFAEB6EN+cYN6xD7RYGpXpNndMmZgM5Dcs3YSNFDHUo2LGfZuukSWyUYirJAdYbF3MfqEKmjM+I2EfhA94iG3L7uKrR+GdWD73ydlIB+6hgref1QTlmgmbM3/LeX5GI1Ux1RWpgxpLuZ2+I+IjzZ8wqE4nilvQdkUdfhzI5QDWy+kw5Wgg2pGpeEVeCCA7b85BO3F9DzxB3cdqvBzWcmzbyMiqhzuYqtHRVG2y4x+KOlnyqla8AoWWpuBoYRxzXrfKuILl6SfiWCbjxoZJUaCBj1CjH7GIaDbc9kqBY3W/Rgjda1iqQcOJu2WW+76pZC9QG7M00dffe9hNnseupFL53r8F7YHSwJWUKP2q+k7RdsxyOB11n0xtOvnW4irMMFNV4H0uqwS5ExsmP9AxbDTc9JwgneAT5vTiUSm1E7BSflSt3bfa1tv8Di3R8n3Af7MNWzs49hmauE2wP+ttrq+AsWpFG2awvsuOqbipWHgtuvuaAE+A1Z/7gC9hesnr+7wqCwG8c5yAg3AL1fm8T9AZtp/bbJGwl1pNrE7RuOX7PeMRUERVaPpEs+yqeoSmuOlokqw49pgomjLeh7icHNlG19yjs6XXOMedYm5xH2YxpV2tc0Ro2jJfxC50ApuxGob7lMsxfTbeUv07TyYxpeLucEH1gNd4IKH2LAg5TdVhlCafZvpskfncCfx8pOhJzd76bJWeYFnFciwcYfubRc12Ip/ppIhA1/mSZ/RxjFDrJC5xifFjJpY2Xl5zXdguFqYyTR1zSp1Y9p+tktDYYSNflcxI0iyO4TPBdlRcpeqjK/piF5bklq77VSEaA+z8qmJTFzIWiitbnzR794USKBUaT0NTEsVjZqLaFVqJoPN9ODG70IPbfBHKK+/q/AWR0tJzYHRULOa4MP+W/HfGadZUbfw177G7j/OGbIs8TahLyynl4X4RinF793Oz+BU0saXtUHrVBFT/DnA3ctNPoGbs4hRIjTok8i+algT1lTHi4SxFvONKNrgQFAq2/gFnWMXgwffgYMJpiKYkmW3tTg3ZQ9Jq+f8XN+A5eeUKHWvJWJ2sgJ1Sop+wwhqFVijqWaJhwtD8MNlSBeWNNWTa5Z5kPZw5+LbVT99wqTdx29lMUH4OIG/D86ruKEauBjvH5xy6um/Sfj7ei6UUVk4AIl3MyD4MSSTOFgSwsH/QJWaQ5as7ZcmgBZkzjjU1UrQ74ci1gWBCSGHtuV1H2mhSnO3Wp/3fEV5a+4wz//6qy8JxjZsmxxy5+4w9CDNJY09T072iKG0EnOS0arEYgXqYnXcYHwjTtUNAcMelOd4xpkoqiTYICWFq0JSiPfPDQdnt+4/wuqcXY47QILbgAAAABJRU5ErkJggg==');
            opacity: 0.03;
            z-index: -1;
            pointer-events: none;
        }

        .glass-morphism {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        .gradient-border {
            position: relative;
            border-radius: 0.5rem;
            background: linear-gradient(60deg, #5f27cd, #48dbfb, #10ac84);
            padding: 3px;
            transition: all 0.3s ease;
        }

        .gradient-border:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .gradient-border > div {
            background: white;
            border-radius: 0.4rem;
        }

        .custom-range {
            -webkit-appearance: none;
            height: 8px;
            background: linear-gradient(90deg, #4f46e5 0%, #818cf8 50%, #c7d2fe 100%);
            border-radius: 4px;
            outline: none;
        }

        .custom-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: white;
            border: 2px solid #4f46e5;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }

        .custom-range::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        }

        .hover-scale {
            transition: all 0.3s ease;
            transform: perspective(1000px) rotateX(0) rotateY(0);
        }

        .hover-scale:hover {
            transform: perspective(1000px) rotateX(2deg) rotateY(2deg);
        }

        .floating {
            animation: floating 3s ease-in-out infinite;
        }

        @keyframes floating {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .pulse-ring {
            position: relative;
        }

        .pulse-ring::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: inherit;
            animation: pulse-ring 2s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
        }

        @keyframes pulse-ring {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.3);
            }
            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(79, 70, 229, 0);
            }
            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(79, 70, 229, 0);
            }
        }

        .chart-container {
            transition: all 0.3s ease;
        }

        .chart-container:hover {
            transform: scale(1.02);
        }

        .progress-bar {
            height: 4px;
            background: linear-gradient(90deg, #4f46e5, #818cf8);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            transform-origin: 0%;
            z-index: 1000;
        }

        .card-3d {
            transform-style: preserve-3d;
            transition: all 0.3s ease;
        }

        .card-content {
            transform: translateZ(20px);
        }

        .shine-effect {
            position: relative;
            overflow: hidden;
        }

        .shine-effect::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent 0%,
                rgba(255, 255, 255, 0.1) 50%,
                transparent 100%
            );
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .particle-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .glow-effect {
            position: relative;
        }

        .glow-effect::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #4f46e5, #818cf8, #4f46e5);
            border-radius: inherit;
            z-index: -1;
            filter: blur(10px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .glow-effect:hover::before {
            opacity: 0.5;
        }

        .floating-label {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .success-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #4f46e5;
            border-radius: 50%;
        }

        .magnetic-button {
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .ripple {
            position: absolute;
            border-radius: 50%;
            transform: scale(0);
            animation: ripple 0.6s linear;
            background-color: rgba(255, 255, 255, 0.3);
        }

        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        .card-stack {
            perspective: 1000px;
        }

        .card-stack > * {
            transform-style: preserve-3d;
            transition: transform 0.5s;
        }

        .scroll-indicator {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 30px;
            height: 60px;
            border: 2px solid #4f46e5;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            padding-top: 10px;
        }

        .scroll-dot {
            width: 6px;
            height: 6px;
            background: #4f46e5;
            border-radius: 50%;
            animation: scrollAnimation 2s infinite;
        }

        @keyframes scrollAnimation {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(20px); opacity: 0; }
        }

        .premium-card {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .premium-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.2),
                transparent
            );
            transition: 0.5s;
        }

        .premium-card:hover::before {
            left: 100%;
        }

        .premium-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border-color: rgba(79, 70, 229, 0.3);
        }

        .progress-ring {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            transform: rotate(-90deg);
        }

        .progress-ring circle {
            stroke-dasharray: 283;
            transition: stroke-dashoffset 0.3s;
            transform-origin: 50% 50%;
        }

        .gradient-text {
            background: linear-gradient(45deg, #4f46e5, #818cf8, #4f46e5);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: gradientFlow 3s linear infinite;
            background-size: 200% 200%;
        }

        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .pulse-dot {
            position: relative;
        }

        .pulse-dot::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: inherit;
            border-radius: inherit;
            animation: pulse 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0; }
            100% { transform: scale(1); opacity: 0; }
        }

        .loading-bar {
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #4f46e5 0%, #818cf8 50%, #4f46e5 100%);
            background-size: 200% 100%;
            animation: moveGradient 2s linear infinite;
        }

        @keyframes moveGradient {
            0% { background-position: 100% 0%; }
            100% { background-position: -100% 0%; }
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .status-badge::before {
            content: '';
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
            animation: statusPulse 2s infinite;
        }

        @keyframes statusPulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.5; }
            100% { transform: scale(1); opacity: 1; }
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin: 2rem 0;
            position: relative;
        }

        .progress-step {
            position: relative;
            z-index: 1;
        }

        .progress-step-circle {
            width: 30px;
            height: 30px;
            background: white;
            border: 2px solid #4f46e5;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .progress-step.active .progress-step-circle {
            background: #4f46e5;
            color: white;
        }

        .progress-line {
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background: #e5e7eb;
            z-index: 0;
        }

        .progress-line-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: #4f46e5;
            transition: width 0.3s ease;
        }

        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateX(120%);
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .notification.show {
            transform: translateX(0);
        }

        .success-checkmark {
            width: 40px;
            height: 40px;
            position: relative;
            display: inline-block;
            animation: checkmark 0.8s cubic-bezier(0.65, 0, 0.45, 1) forwards;
        }

        @keyframes checkmark {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .loading-spinner {
            width: 30px;
            height: 30px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #4f46e5;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .card-content {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-content.show {
            opacity: 1;
            transform: translateY(0);
        }

        .feature-icon {
            position: relative;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: linear-gradient(135deg, #4f46e5 0%, #818cf8 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .feature-icon::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: inherit;
            filter: blur(10px);
            opacity: 0.7;
            transition: all 0.3s ease;
        }

        .feature-icon:hover::after {
            transform: scale(1.2);
            opacity: 0.9;
        }
    </style>
</head>
<body class="py-8">
    <div id="tsparticles" class="particle-background"></div>
    <div class="scroll-indicator">
        <div class="scroll-dot"></div>
    </div>
    <div class="noise"></div>
    <div class="progress-bar" id="progressBar"></div>
    
    <div class="container mx-auto px-4">
        <div class="text-center mb-12 floating">
            <h1 class="text-6xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-blue-500 glow-effect">
                AI-Powered User Research Tool
            </h1>
            <p class="text-gray-600 text-xl floating-label">Generate detailed user personas and insights with advanced AI analysis</p>
        </div>

        <!-- Main Content -->
        <div class="max-w-4xl mx-auto">
            <!-- API Key Input -->
            <div class="max-w-2xl mx-auto mb-12">
                <div class="glass-morphism rounded-xl p-6 border-2 border-indigo-100 hover:border-indigo-200 transition-all">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center mr-3">
                                <i class="fas fa-key text-indigo-600 text-xl"></i>
                            </div>
                            <div>
                                <label class="block text-gray-800 font-bold text-lg" for="apiKey">
                                    OpenAI API Key
                                </label>
                                <p class="text-sm text-gray-600">Required for generating personas and insights</p>
                            </div>
                        </div>
                        <div class="relative group">
                            <i class="fas fa-info-circle text-indigo-400 hover:text-indigo-600 cursor-pointer text-xl"></i>
                            <div class="absolute right-0 w-64 p-4 mt-2 text-sm bg-white rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-10">
                                Your API key is securely handled and only used for OpenAI API calls. It's never stored or transmitted elsewhere.
                            </div>
                        </div>
                    </div>
                    <div class="relative">
                        <input type="password" 
                               id="apiKey" 
                               class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all text-gray-800 text-lg font-mono"
                               placeholder="sk-..." 
                               autocomplete="off"
                               spellcheck="false">
                        <button id="toggleApiKey" 
                                class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none"
                                type="button">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="flex items-center mt-3 text-sm text-gray-500">
                        <i class="fas fa-shield-alt mr-2"></i>
                        <span>API key is securely handled and never stored</span>
                    </div>
                </div>
            </div>

            <!-- Product Description Input -->
            <div class="glass-morphism rounded-xl p-8 mb-8 card-3d" data-tilt data-tilt-max="5" data-tilt-speed="400" data-tilt-perspective="1000">
                <div class="card-content">
                    <div class="flex items-center mb-6">
                        <i class="fas fa-lightbulb text-yellow-500 mr-2 text-xl"></i>
                        <h2 class="text-2xl font-bold text-gray-800">Product Description</h2>
                    </div>
                    
                    <!-- Number of Personas Slider -->
                    <div class="mb-8">
                        <div class="flex items-center justify-between mb-2">
                            <label class="text-gray-700 font-bold flex items-center">
                                <i class="fas fa-users text-indigo-600 mr-2"></i>
                                Number of Personas
                            </label>
                            <span id="personaCountValue" class="text-2xl font-bold text-indigo-600">3</span>
                        </div>
                        <input type="range" id="personaCount" 
                               class="custom-range w-full"
                               min="1" max="10" value="3" 
                               oninput="document.getElementById('personaCountValue').textContent = this.value">
                        <div class="flex justify-between text-sm text-gray-500 px-2 mt-1">
                            <span>1</span>
                            <span>5</span>
                            <span>10</span>
                        </div>
                    </div>

                    <div class="mb-6">
                        <textarea id="productDescription" rows="4" 
                                  class="w-full p-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
                                  placeholder="Describe your product or feature in detail..."></textarea>
                    </div>
                    
                    <!-- Image Upload -->
                    <div class="mb-6">
                        <div class="flex items-center mb-2">
                            <i class="fas fa-images text-green-500 mr-2"></i>
                            <label class="text-gray-700 font-bold">Product Images</label>
                        </div>
                        <div class="flex items-center justify-center w-full">
                            <label class="w-full flex flex-col items-center px-4 py-6 bg-white rounded-lg shadow-lg border-2 border-dashed border-gray-300 cursor-pointer hover:bg-gray-50 transition-all">
                                <i class="fas fa-cloud-upload-alt text-4xl text-indigo-500 mb-2"></i>
                                <span class="text-gray-600">Drop files here or click to upload</span>
                                <input type='file' class="hidden" id="imageUpload" multiple accept="image/*" />
                            </label>
                        </div>
                        <div id="imagePreview" class="mt-4 flex flex-wrap gap-4"></div>
                    </div>

                    <button id="analyzeBtn" 
                            class="w-full bg-gradient-to-r from-indigo-600 to-blue-500 text-white font-bold py-3 px-6 rounded-lg hover:opacity-90 transition-all flex items-center justify-center gap-2">
                        <i class="fas fa-magic"></i>
                        Generate User Research
                    </button>
                    
                    <div id="loading" class="loading mt-4 text-center">
                        <div class="inline-block">
                            <i class="fas fa-circle-notch fa-spin text-4xl text-indigo-600"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analysis Section -->
            <div id="analysis" class="mb-12 hidden">
                <h2 class="text-3xl font-bold text-center mb-8 text-gray-800">Research Insights</h2>
                
                <!-- Summary Stats -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="glass-morphism rounded-xl p-6 hover-scale chart-container shine-effect" data-tilt>
                        <h3 class="text-xl font-semibold mb-4 text-gray-800 flex items-center">
                            <i class="fas fa-heart text-pink-500 mr-2"></i>
                            Overall Sentiment
                        </h3>
                        <canvas id="sentimentChart"></canvas>
                    </div>
                    <div class="glass-morphism rounded-xl p-6 hover-scale chart-container shine-effect" data-tilt>
                        <h3 class="text-xl font-semibold mb-4 text-gray-800 flex items-center">
                            <i class="fas fa-shopping-cart text-green-500 mr-2"></i>
                            Purchase Likelihood
                        </h3>
                        <canvas id="purchaseChart"></canvas>
                    </div>
                    <div class="glass-morphism rounded-xl p-6 hover-scale chart-container shine-effect" data-tilt>
                        <h3 class="text-xl font-semibold mb-4 text-gray-800 flex items-center">
                            <i class="fas fa-users text-blue-500 mr-2"></i>
                            User Segments
                        </h3>
                        <canvas id="segmentChart"></canvas>
                    </div>
                </div>

                <!-- Key Insights -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="glass-morphism rounded-xl p-6 hover-scale chart-container shine-effect" data-tilt>
                        <h3 class="text-xl font-semibold mb-4 text-gray-800 flex items-center">
                            <i class="fas fa-plus-circle text-green-500 mr-2"></i>
                            Common Benefits
                        </h3>
                        <div id="commonBenefits" class="space-y-3"></div>
                    </div>
                    <div class="glass-morphism rounded-xl p-6 hover-scale chart-container shine-effect" data-tilt>
                        <h3 class="text-xl font-semibold mb-4 text-gray-800 flex items-center">
                            <i class="fas fa-exclamation-circle text-red-500 mr-2"></i>
                            Common Concerns
                        </h3>
                        <div id="commonConcerns" class="space-y-3"></div>
                    </div>
                </div>

                <!-- AI Summary -->
                <div class="glass-morphism rounded-xl p-6 hover-scale chart-container shine-effect" data-tilt>
                    <h3 class="text-xl font-semibold mb-4 text-gray-800 flex items-center">
                        <i class="fas fa-robot text-purple-500 mr-2"></i>
                        AI-Generated Summary
                    </h3>
                    <div id="aiSummary" class="prose max-w-none"></div>
                </div>
            </div>

            <!-- Results Section -->
            <div id="results" class="space-y-8">
                <!-- Personas will be displayed here -->
            </div>
        </div>
    </div>

    <script>
        let apiKey = '';
        const apiKeyInput = document.getElementById('apiKey');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const loading = document.getElementById('loading');
        const results = document.getElementById('results');
        const imageUpload = document.getElementById('imageUpload');
        const imagePreview = document.getElementById('imagePreview');
        
        // Handle image upload and preview with logging
        let uploadedImages = [];
        
        imageUpload.addEventListener('change', async function(e) {
            imagePreview.innerHTML = '';
            uploadedImages = [];
            
            for (const file of this.files) {
                if (!file.type.startsWith('image/')) {
                    continue;
                }

                const reader = new FileReader();
                reader.onload = async function(e) {
                    try {
                        const img = document.createElement('img');
                        img.src = e.target.result;
                        img.className = 'w-32 h-32 object-cover rounded';
                        imagePreview.appendChild(img);

                        // Convert image to base64
                        const base64Image = e.target.result.split(',')[1];
                        uploadedImages.push({
                            name: file.name,
                            base64: base64Image
                        });
                    } catch (error) {
                        console.error(`Error processing image: ${error.message}`);
                    }
                };
                reader.readAsDataURL(file);
            }
        });

        // Store API key
        apiKeyInput.addEventListener('change', function(e) {
            apiKey = e.target.value;
        });

        async function callOpenAI(prompt, responseFormat = true) {
            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${apiKey}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    model: "gpt-4o-mini",
                    messages: [{
                        role: "user",
                        content: prompt
                    }],
                    response_format: responseFormat ? { "type": "json_object" } : undefined,
                    temperature: 0.7
                })
            });

            if (!response.ok) {
                const error = await response.json();
                throw new Error(error.error?.message || 'API call failed');
            }

            const data = await response.json();
            return responseFormat ? JSON.parse(data.choices[0].message.content) : data.choices[0].message.content;
        }

        async function generatePersonas(description) {
            const personaCount = document.getElementById('personaCount').value;
            
            // Prepare messages array with text and images
            const messages = [{
                role: "user",
                content: []
            }];

            // Add text content
            messages[0].content.push({
                type: "text",
                text: `Generate ${personaCount} detailed user personas for the following product/feature. 
                Return a JSON object with a "personas" array where each persona has these fields:
                - name: Full name
                - age: Number
                - occupation: Current job
                - background: Brief life context
                - goals: Main objectives
                - painPoints: Current challenges
                - techSavviness: Level of tech comfort (Low/Medium/High)

                Make the personas diverse and from different market segments, ensuring each persona is unique and represents a different user segment.
                Product description: ${description}`
            });

            // Add images if available
            if (uploadedImages.length > 0) {
                for (const img of uploadedImages) {
                    messages[0].content.push({
                        type: "image_url",
                        image_url: {
                            url: `data:image/jpeg;base64,${img.base64}`
                        }
                    });
                }
            }

            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: "gpt-4o-mini",
                        messages: messages,
                        max_tokens: Math.max(1000, personaCount * 500), // Adjust max tokens based on persona count
                        response_format: { type: "json_object" }
                    })
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error?.message || 'API call failed');
                }

                const data = await response.json();
                return JSON.parse(data.choices[0].message.content).personas;
            } catch (error) {
                throw error;
            }
        }

        async function getPersonaFeedback(description, persona) {
            // Prepare messages array with text and images
            const messages = [{
                role: "user",
                content: []
            }];

            // Add text content
            messages[0].content.push({
                type: "text",
                text: `You are ${persona.name}, a ${persona.age}-year-old ${persona.occupation}.
                Given your background (${persona.background}), goals (${persona.goals}), and pain points (${persona.painPoints}),
                provide feedback about this product/feature.
                
                Return a JSON object with these fields:
                - initialImpressions: First thoughts about the product
                - benefits: How it could help you
                - concerns: What worries you
                - purchaseLikelihood: How likely you would buy it (Very Likely/Likely/Neutral/Unlikely/Very Unlikely)
                - suggestedImprovements: What would make it better for you

                Product description: ${description}`
            });

            // Add images if available
            if (uploadedImages.length > 0) {
                for (const img of uploadedImages) {
                    messages[0].content.push({
                        type: "image_url",
                        image_url: {
                            url: `data:image/jpeg;base64,${img.base64}`
                        }
                    });
                }
            }

            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: "gpt-4o-mini",
                        messages: messages,
                        max_tokens: 1000,
                        response_format: { type: "json_object" }
                    })
                });

                if (!response.ok) {
                    throw new Error(response.error?.message || 'API call failed');
                }

                const data = await response.json();
                return JSON.parse(data.choices[0].message.content);
            } catch (error) {
                throw error;
            }
        }

        function displayResult(persona, feedback) {
            const resultCard = document.createElement('div');
            resultCard.className = 'result-card glass-morphism rounded-xl p-6 hover-scale card-3d shine-effect';
            resultCard.innerHTML = `
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-2xl font-bold text-gray-800">${persona.name}</h3>
                        <span class="px-4 py-1 rounded-full ${getTechSavvinessColor(persona.techSavviness)}">
                            ${persona.techSavviness}
                        </span>
                    </div>
                    <div class="grid grid-cols-2 gap-4 text-gray-600">
                        <div class="flex items-center">
                            <i class="fas fa-user-circle text-indigo-500 mr-2"></i>
                            <span><strong>Age:</strong> ${persona.age}</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-briefcase text-blue-500 mr-2"></i>
                            <span><strong>Occupation:</strong> ${persona.occupation}</span>
                        </div>
                    </div>
                    <div class="mt-4">
                        <div class="flex items-center text-gray-600 mb-2">
                            <i class="fas fa-book text-green-500 mr-2"></i>
                            <p><strong>Background:</strong> ${persona.background}</p>
                        </div>
                    </div>
                </div>
                <div class="space-y-4">
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-semibold text-lg mb-2 flex items-center">
                            <i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
                            Initial Impressions
                        </h4>
                        <p class="text-gray-700">${feedback.initialImpressions}</p>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-semibold text-lg mb-2 flex items-center">
                            <i class="fas fa-plus-circle text-green-500 mr-2"></i>
                            Benefits
                        </h4>
                        <p class="text-gray-700">${feedback.benefits}</p>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-semibold text-lg mb-2 flex items-center">
                            <i class="fas fa-exclamation-circle text-red-500 mr-2"></i>
                            Concerns
                        </h4>
                        <p class="text-gray-700">${feedback.concerns}</p>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-semibold text-lg mb-2 flex items-center">
                            <i class="fas fa-shopping-cart text-blue-500 mr-2"></i>
                            Purchase Likelihood
                        </h4>
                        <p class="text-gray-700">${getPurchaseLikelihoodBadge(feedback.purchaseLikelihood)}</p>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-semibold text-lg mb-2 flex items-center">
                            <i class="fas fa-tools text-purple-500 mr-2"></i>
                            Suggested Improvements
                        </h4>
                        <p class="text-gray-700">${feedback.suggestedImprovements}</p>
                    </div>
                </div>
            `;
            results.appendChild(resultCard);
            
            // Initialize tilt effect
            VanillaTilt.init(resultCard, {
                max: 5,
                speed: 400,
                glare: true,
                "max-glare": 0.2,
            });
        }

        function getTechSavvinessColor(level) {
            const colors = {
                'High': 'bg-green-100 text-green-800',
                'Medium': 'bg-yellow-100 text-yellow-800',
                'Low': 'bg-red-100 text-red-800'
            };
            return colors[level] || 'bg-gray-100 text-gray-800';
        }

        function getPurchaseLikelihoodBadge(likelihood) {
            const badges = {
                'Very Likely': '<span class="inline-flex items-center px-3 py-1 rounded-full bg-green-100 text-green-800"><i class="fas fa-check-circle mr-1"></i>Very Likely</span>',
                'Likely': '<span class="inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800"><i class="fas fa-thumbs-up mr-1"></i>Likely</span>',
                'Neutral': '<span class="inline-flex items-center px-3 py-1 rounded-full bg-gray-100 text-gray-800"><i class="fas fa-minus-circle mr-1"></i>Neutral</span>',
                'Unlikely': '<span class="inline-flex items-center px-3 py-1 rounded-full bg-yellow-100 text-yellow-800"><i class="fas fa-thumbs-down mr-1"></i>Unlikely</span>',
                'Very Unlikely': '<span class="inline-flex items-center px-3 py-1 rounded-full bg-red-100 text-red-800"><i class="fas fa-times-circle mr-1"></i>Very Unlikely</span>'
            };
            return badges[likelihood] || likelihood;
        }

        async function analyzeResults(personas, feedbacks) {
            // Show analysis section
            document.getElementById('analysis').classList.remove('hidden');

            // Prepare data for sentiment analysis
            const sentimentData = {
                positive: 0,
                neutral: 0,
                negative: 0
            };

            // Prepare data for purchase likelihood
            const purchaseData = {
                'Very Likely': 0,
                'Likely': 0,
                'Neutral': 0,
                'Unlikely': 0,
                'Very Unlikely': 0
            };

            // Collect all benefits and concerns
            const allBenefits = [];
            const allConcerns = [];

            feedbacks.forEach(feedback => {
                // Analyze sentiment based on feedback content
                const sentiment = analyzeSentiment(feedback);
                sentimentData[sentiment]++;

                // Count purchase likelihood
                purchaseData[feedback.purchaseLikelihood]++;

                // Collect benefits and concerns
                allBenefits.push(...extractKeyPoints(feedback.benefits));
                allConcerns.push(...extractKeyPoints(feedback.concerns));
            });

            // Create charts
            createSentimentChart(sentimentData);
            createPurchaseChart(purchaseData);
            createSegmentChart(personas);

            // Display common benefits and concerns
            displayCommonPoints('commonBenefits', findCommonPoints(allBenefits));
            displayCommonPoints('commonConcerns', findCommonPoints(allConcerns));

            // Generate and display AI summary
            const summary = await generateAISummary(personas, feedbacks);
            document.getElementById('aiSummary').innerHTML = summary;
        }

        function analyzeSentiment(feedback) {
            const text = feedback.initialImpressions + ' ' + feedback.benefits + ' ' + feedback.concerns;
            const positiveWords = ['excellent', 'great', 'amazing', 'love', 'perfect', 'innovative'];
            const negativeWords = ['poor', 'bad', 'difficult', 'confusing', 'expensive', 'complicated'];

            let positiveCount = positiveWords.filter(word => text.toLowerCase().includes(word)).length;
            let negativeCount = negativeWords.filter(word => text.toLowerCase().includes(word)).length;

            if (positiveCount > negativeCount) return 'positive';
            if (negativeCount > positiveCount) return 'negative';
            return 'neutral';
        }

        function extractKeyPoints(text) {
            return text.split(/[.,;]/).map(point => point.trim()).filter(point => point.length > 0);
        }

        function findCommonPoints(points) {
            const frequency = {};
            points.forEach(point => {
                frequency[point] = (frequency[point] || 0) + 1;
            });
            return Object.entries(frequency)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 5)
                .map(([point, count]) => ({ point, count }));
        }

        function displayCommonPoints(elementId, points) {
            const container = document.getElementById(elementId);
            container.innerHTML = points.map(({ point, count }) => `
                <div class="flex items-center">
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div class="bg-blue-600 h-2.5 rounded-full" style="width: ${(count / points[0].count) * 100}%"></div>
                    </div>
                    <span class="ml-2 text-sm text-gray-600">${point}</span>
                </div>
            `).join('');
        }

        function createSentimentChart(data) {
            new Chart(document.getElementById('sentimentChart'), {
                type: 'doughnut',
                data: {
                    labels: Object.keys(data),
                    datasets: [{
                        data: Object.values(data),
                        backgroundColor: ['#4CAF50', '#FFC107', '#F44336']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        function createPurchaseChart(data) {
            new Chart(document.getElementById('purchaseChart'), {
                type: 'bar',
                data: {
                    labels: Object.keys(data),
                    datasets: [{
                        data: Object.values(data),
                        backgroundColor: '#3B82F6'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    }
                }
            });
        }

        function createSegmentChart(personas) {
            const ageGroups = {
                '18-30': 0,
                '31-50': 0,
                '51+': 0
            };

            personas.forEach(persona => {
                const age = parseInt(persona.age);
                if (age <= 30) ageGroups['18-30']++;
                else if (age <= 50) ageGroups['31-50']++;
                else ageGroups['51+']++;
            });

            // Calculate percentages
            const total = Object.values(ageGroups).reduce((a, b) => a + b, 0);
            const percentages = {};
            Object.entries(ageGroups).forEach(([key, value]) => {
                percentages[key] = ((value / total) * 100).toFixed(1) + '%';
            });

            new Chart(document.getElementById('segmentChart'), {
                type: 'pie',
                data: {
                    labels: Object.keys(ageGroups).map(key => `${key} (${percentages[key]})`),
                    datasets: [{
                        data: Object.values(ageGroups),
                        backgroundColor: ['#EC4899', '#8B5CF6', '#3B82F6']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        async function generateAISummary(personas, feedbacks) {
            const prompt = `Generate a concise executive summary of the user research results. Here's the data:
            Personas: ${JSON.stringify(personas)}
            Feedback: ${JSON.stringify(feedbacks)}
            
            Focus on:
            1. Key patterns and insights
            2. Major opportunities
            3. Critical challenges
            4. Recommendations
            
            Format with HTML for better readability.`;

            const summary = await callOpenAI(prompt, false);
            return summary;
        }

        // Initialize Vanilla Tilt
        VanillaTilt.init(document.querySelectorAll("[data-tilt]"), {
            max: 5,
            speed: 400,
            glare: true,
            "max-glare": 0.2,
        });

        // Progress bar animation
        const progressBar = document.getElementById('progressBar');
        let progress = 0;
        let progressInterval;

        function startProgress() {
            progress = 0;
            progressBar.style.width = '0%';
            progressBar.style.opacity = '1';
            
            progressInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 90) {
                    clearInterval(progressInterval);
                }
                progressBar.style.width = Math.min(progress, 90) + '%';
            }, 500);
        }

        function completeProgress() {
            clearInterval(progressInterval);
            progress = 100;
            progressBar.style.width = '100%';
            setTimeout(() => {
                progressBar.style.opacity = '0';
            }, 200);
        }

        // Update the analyzeBtn click handler
        analyzeBtn.addEventListener('click', async function() {
            if (!apiKey) {
                alert('Please enter your OpenAI API key');
                return;
            }

            const productDescription = document.getElementById('productDescription').value;
            if (!productDescription) {
                alert('Please enter a product description');
                return;
            }

            loading.style.display = 'block';
            results.innerHTML = '';
            document.getElementById('analysis').classList.add('hidden');

            startProgress();

            try {
                showNotification('Starting analysis...', 'info');
                
                // Generate personas first
                const personas = await generatePersonas(productDescription);
                
                // Create placeholder cards for each persona with loading state
                personas.forEach((persona, index) => {
                    const placeholderCard = document.createElement('div');
                    placeholderCard.id = `persona-${index}`;
                    placeholderCard.className = 'result-card glass-morphism rounded-xl p-6 hover-scale card-3d shine-effect';
                    placeholderCard.innerHTML = `
                        <div class="animate-pulse">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-2xl font-bold text-gray-800">${persona.name}</h3>
                                <div class="px-4 py-1 rounded-full bg-gray-200 w-24"></div>
                            </div>
                            <div class="space-y-4">
                                <div class="h-4 bg-gray-200 rounded w-3/4"></div>
                                <div class="h-4 bg-gray-200 rounded w-1/2"></div>
                                <div class="h-4 bg-gray-200 rounded w-5/6"></div>
                            </div>
                            <div class="mt-4 flex items-center space-x-2">
                                <div class="w-8 h-8 bg-indigo-200 rounded-full flex items-center justify-center">
                                    <i class="fas fa-spinner fa-spin text-indigo-600"></i>
                                </div>
                                <span class="text-indigo-600 font-medium">Analyzing...</span>
                            </div>
                        </div>
                    `;
                    results.appendChild(placeholderCard);
                });

                // Get feedback for all personas concurrently
                const feedbackPromises = personas.map((persona, index) => 
                    getPersonaFeedback(productDescription, persona)
                        .then(feedback => {
                            updatePersonaCard(persona, feedback, index);
                            return feedback;
                        })
                );

                // Wait for all feedback to be generated
                const feedbacks = await Promise.all(feedbackPromises);

                // Generate and display analysis
                await analyzeResults(personas, feedbacks);

                // Show success notification and animation only after everything is complete
                showSuccessAnimation();
                showNotification('Analysis completed successfully!');

            } catch (error) {
                showNotification(error.message, 'error');
            } finally {
                completeProgress();
                loading.style.display = 'none';
            }
        });

        function updatePersonaCard(persona, feedback, index) {
            const card = document.getElementById(`persona-${index}`);
            if (!card) return;

            card.innerHTML = `
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-2xl font-bold text-gray-800">${persona.name}</h3>
                        <span class="px-4 py-1 rounded-full ${getTechSavvinessColor(persona.techSavviness)}">
                            ${persona.techSavviness}
                        </span>
                    </div>
                    <div class="grid grid-cols-2 gap-4 text-gray-600">
                        <div class="flex items-center">
                            <i class="fas fa-user-circle text-indigo-500 mr-2"></i>
                            <span><strong>Age:</strong> ${persona.age}</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-briefcase text-blue-500 mr-2"></i>
                            <span><strong>Occupation:</strong> ${persona.occupation}</span>
                        </div>
                    </div>
                    <div class="mt-4">
                        <div class="flex items-center text-gray-600 mb-2">
                            <i class="fas fa-book text-green-500 mr-2"></i>
                            <p><strong>Background:</strong> ${persona.background}</p>
                        </div>
                    </div>
                </div>
                <div class="space-y-4">
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-semibold text-lg mb-2 flex items-center">
                            <i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
                            Initial Impressions
                        </h4>
                        <p class="text-gray-700">${feedback.initialImpressions}</p>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-semibold text-lg mb-2 flex items-center">
                            <i class="fas fa-plus-circle text-green-500 mr-2"></i>
                            Benefits
                        </h4>
                        <p class="text-gray-700">${feedback.benefits}</p>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-semibold text-lg mb-2 flex items-center">
                            <i class="fas fa-exclamation-circle text-red-500 mr-2"></i>
                            Concerns
                        </h4>
                        <p class="text-gray-700">${feedback.concerns}</p>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-semibold text-lg mb-2 flex items-center">
                            <i class="fas fa-shopping-cart text-blue-500 mr-2"></i>
                            Purchase Likelihood
                        </h4>
                        <p class="text-gray-700">${getPurchaseLikelihoodBadge(feedback.purchaseLikelihood)}</p>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-semibold text-lg mb-2 flex items-center">
                            <i class="fas fa-tools text-purple-500 mr-2"></i>
                            Suggested Improvements
                        </h4>
                        <p class="text-gray-700">${feedback.suggestedImprovements}</p>
                    </div>
                </div>
            `;

            // Animate the card update
            gsap.from(card, {
                opacity: 0.5,
                scale: 0.95,
                duration: 0.5,
                ease: "power2.out"
            });
        }

        // Add GSAP animations
        gsap.from(".floating", {
            y: 30,
            opacity: 0,
            duration: 1,
            ease: "power3.out"
        });

        // Enhance chart animations
        function createChart(type, data, options) {
            // Previous chart creation code
            gsap.from(chartContainer, {
                scale: 0.9,
                opacity: 0,
                duration: 0.5,
                ease: "power2.out"
            });
        }

        document.getElementById('toggleApiKey').addEventListener('click', function() {
            const apiKeyInput = document.getElementById('apiKey');
            const icon = this.querySelector('i');
            
            if (apiKeyInput.type === 'password') {
                apiKeyInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                apiKeyInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });

        // Add visual feedback when API key is entered
        document.getElementById('apiKey').addEventListener('input', function() {
            const container = this.closest('.glass-morphism');
            if (this.value.trim().startsWith('sk-')) {
                container.classList.add('border-green-200');
                container.classList.remove('border-indigo-100');
            } else {
                container.classList.remove('border-green-200');
                container.classList.add('border-indigo-100');
            }
        });

        // Initialize particles
        tsParticles.load("tsparticles", {
            particles: {
                number: {
                    value: 80,
                    density: {
                        enable: true,
                        value_area: 800
                    }
                },
                color: {
                    value: "#4f46e5"
                },
                shape: {
                    type: "circle"
                },
                opacity: {
                    value: 0.2,
                    random: true
                },
                size: {
                    value: 3,
                    random: true
                },
                move: {
                    enable: true,
                    speed: 1,
                    direction: "none",
                    random: true,
                    straight: false,
                    out_mode: "out",
                    bounce: false
                },
                links: {
                    enable: true,
                    distance: 150,
                    color: "#4f46e5",
                    opacity: 0.1,
                    width: 1
                }
            },
            interactivity: {
                detect_on: "canvas",
                events: {
                    onhover: {
                        enable: true,
                        mode: "grab"
                    },
                    resize: true
                },
                modes: {
                    grab: {
                        distance: 140,
                        line_linked: {
                            opacity: 0.3
                        }
                    }
                }
            }
        });

        // Magnetic button effect
        const magneticButtons = document.querySelectorAll('.magnetic-button');
        magneticButtons.forEach(btn => {
            btn.addEventListener('mousemove', (e) => {
                const rect = btn.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;
                btn.style.transform = `translate(${x * 0.2}px, ${y * 0.2}px)`;
            });
            btn.addEventListener('mouseleave', () => {
                btn.style.transform = 'translate(0, 0)';
            });
        });

        // Ripple effect
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('ripple-button')) {
                const ripple = document.createElement('span');
                ripple.classList.add('ripple');
                e.target.appendChild(ripple);
                const rect = e.target.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                ripple.style.width = ripple.style.height = `${size}px`;
                ripple.style.left = `${e.clientX - rect.left - size/2}px`;
                ripple.style.top = `${e.clientY - rect.top - size/2}px`;
                setTimeout(() => ripple.remove(), 600);
            }
        });

        // Success animation
        function showSuccessAnimation() {
            const container = document.createElement('div');
            container.className = 'success-animation';
            document.body.appendChild(container);

            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.top = `${Math.random() * 100}%`;
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 70%, 50%)`;
                container.appendChild(confetti);

                gsap.to(confetti, {
                    y: '100vh',
                    rotation: Math.random() * 520,
                    duration: 1 + Math.random() * 2,
                    ease: 'power1.out'
                });
            }

            setTimeout(() => container.remove(), 3000);
        }

        // Scroll animations
        gsap.registerPlugin(ScrollTrigger);
        
        gsap.utils.toArray('.card-stack > *').forEach((card, i) => {
            ScrollTrigger.create({
                trigger: card,
                start: 'top center+=100',
                onEnter: () => {
                    gsap.fromTo(card,
                        {
                            y: 50,
                            opacity: 0,
                            rotateX: 10
                        },
                        {
                            duration: 0.8,
                            y: 0,
                            opacity: 1,
                            rotateX: 0,
                            ease: 'power3.out'
                        }
                    );
                },
                once: true
            });
        });

        // Add new animations and interactions
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.innerHTML = `
                <div class="flex items-center">
                    <div class="success-checkmark mr-3">
                        <i class="fas fa-${type === 'success' ? 'check' : 'info'}-circle text-${type === 'success' ? 'green' : 'blue'}-500"></i>
                    </div>
                    <p class="text-gray-800">${message}</p>
                </div>
            `;
            document.body.appendChild(notification);
            setTimeout(() => notification.classList.add('show'), 100);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Update progress ring
        function updateProgressRing(progress) {
            const circle = document.querySelector('.progress-ring circle');
            const radius = circle.r.baseVal.value;
            const circumference = radius * 2 * Math.PI;
            circle.style.strokeDashoffset = circumference - (progress / 100) * circumference;
        }

        // Add scroll-based animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('show');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.card-content').forEach(card => {
            observer.observe(card);
        });

        // Previous JavaScript code remains
    </script>
</body>
</html> 